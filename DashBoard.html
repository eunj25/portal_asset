<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>대시보드</title>
  <!-- favicon -->
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon.png">
  <!-- jquery CDN -->
  <script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.js"></script>
  <!-- google font-->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <!-- fullcalendar JS -->
  <script src="/lib/fullcalendar/index.global.min.js"></script>
  <!-- popper, tippy js-->
    <script src="/lib/popper/popper.min.js"></script>
    <script src="/lib/tippy/tipppy.min.js"></script>
  <!-- custom CSS & JS-->
  <link rel="stylesheet" href="/css/common.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/responsive.css">
  <link rel="stylesheet" href="/css/reset.css">
  <script src="/script/custom.js"></script>
</head>
<body>

  <!-- ////////////// header inclue -->
  <div class="header"></div>

  <main>
    <!-- ////////////// menu inclue -->
    <div class="menu"></div>

    <div class="container">

      <!-- ////////////// myTask inclue -->
      <div class="myTask"></div>

      <!-- ////////////// pageHeader start -->
      <div class="page_header">
        <div class="title_box">
          <h6 id="page-title"></h6>
          <p id="page-hint"></p>
        </div>
      </div>
      <!-- pageHeader end -->

      <div class="container_inner dash">  
        <div class="flex_lg">
          <div class="banner_box">
            <div class="banner_wrap">
              <img src="/images/banner.png" alt="">
            </div>
            <div class="flex_md shortBtn">
              <button>
                <div>
                  <span class="material-symbols-outlined">content_paste_search</span>과제요청 방법
                </div>
                <span class="material-symbols-outlined arrow">arrow_right_alt</span>
              </button>
              <button>
                <div>
                  <span class="material-symbols-outlined">library_add</span>과제요청
                </div>
                <span class="material-symbols-outlined arrow">arrow_right_alt</span>
              </button>
              <button>
                <div>
                  <span class="material-symbols-outlined">assignment</span>업무자동화 사례
                </div>
                <span class="material-symbols-outlined arrow">arrow_right_alt</span>
              </button>
              <button>
                <div>
                  <span class="material-symbols-outlined">note_alt</span>장애접수
                </div>
                <span class="material-symbols-outlined arrow">arrow_right_alt</span>
              </button>
            </div>
          </div>
          <div class="paper">
            <div id='calendar'></div>
          </div>
        </div>

        <div class="flex_lg">
          <!-- card start -->
          <div class="card" id="card1">
            <div class="card_head">
              <div class="subtitle02">공지사항</div>
              <!-- tab button -->
              <div class="tab_menu line_sm">
                <button class="tab_button active" data-tab="rpa">RPA 지식 정보방</button>
                <button class="tab_button" data-tab="notic">문의하기</button>
              </div>
            </div>
            <div class="card_body">
              <div class="table_box">
                <div class="tab_content active" id="rpa">
                  <div class="table_wrap">
                    <table>
                      <colgroup>
                        <col >
                        <col style="width: 60%;">
                        <col >
                        <col >
                        <col >
                        <col >
                      </colgroup>
                      <thead>
                        <tr>
                          <th>상태</th>
                          <th>제목</th>
                          <th>작성자</th>
                          <th>작성일</th>
                          <th>조회수</th>
                          <th>첨부</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>
                            1
                          </td>
                          <td class="left">
                            <a href="">제목입니다.</a>
                          </td>
                          <td>NTAS</td>
                          <td>2024.12.12</td>
                          <td>3</td>
                          <td><span class="material-symbols-outlined">attach_file</span></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
                <div class="tab_content" id="notic">
                  <div class="table_wrap">
                    <table>
                      <colgroup>
                        <col >
                        <col style="width: 60%;">
                        <col >
                        <col >
                        <col >
                        <col >
                      </colgroup>
                      <thead>
                        <tr>
                          <th>상태</th>
                          <th>제목</th>
                          <th>작성자</th>
                          <th>작성일</th>
                          <th>조회수</th>
                          <th>첨부</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>
                            1
                          </td>
                          <td class="left">
                            <a href="">문의 제목입니다.</a>
                          </td>
                          <td>NTAS</td>
                          <td>2024.12.12</td>
                          <td>3</td>
                          <td><span class="material-symbols-outlined">attach_file</span></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- card end -->
          <!-- card start -->
          <div class="card" id="card2">
            <div class="card_head">
              <div class="subtitle02">장애 처리 현황</div>
              <!-- tab button -->
              <div class="tab_menu line_sm">
                <button class="tab_button active" data-tab="tab03">접수(3)</button>
                <button class="tab_button" data-tab="tab04">처리중(1)</button>
                <button class="tab_button" data-tab="tab05">처리완료(2)</button>
              </div>
            </div>
            <div class="card_body">
              <div class="table_box">
                <div class="tab_content active" id="tab03">
                  <div class="table_wrap">
                    <table>
                      <colgroup>
                        <col >
                        <col style="width: 60%;">
                        <col >
                        <col >
                        <col >
                        <col >
                      </colgroup>
                      <thead>
                        <tr>
                          <th>상태</th>
                          <th>제목</th>
                          <th>작성자</th>
                          <th>작성일</th>
                          <th>조회수</th>
                          <th>첨부</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>
                            1
                          </td>
                          <td class="left">
                            <a href="">제목입니다.</a>
                          </td>
                          <td>NTAS</td>
                          <td>2024.12.12</td>
                          <td>3</td>
                          <td><span class="material-symbols-outlined">attach_file</span></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
                <div class="tab_content" id="tab04">
                  <div class="table_wrap">
                    <table>
                      <colgroup>
                        <col >
                        <col style="width: 60%;">
                        <col >
                        <col >
                        <col >
                        <col >
                      </colgroup>
                      <thead>
                        <tr>
                          <th>상태</th>
                          <th>제목</th>
                          <th>작성자</th>
                          <th>작성일</th>
                          <th>조회수</th>
                          <th>첨부</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>
                            1
                          </td>
                          <td class="left">
                            <a href="">tab04 제목입니다.</a>
                          </td>
                          <td>NTAS</td>
                          <td>2024.12.12</td>
                          <td>3</td>
                          <td><span class="material-symbols-outlined">attach_file</span></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
                <div class="tab_content" id="tab05">
                  <div class="table_wrap">
                    <table>
                      <colgroup>
                        <col >
                        <col style="width: 60%;">
                        <col >
                        <col >
                        <col >
                        <col >
                      </colgroup>
                      <thead>
                        <tr>
                          <th>상태</th>
                          <th>제목</th>
                          <th>작성자</th>
                          <th>작성일</th>
                          <th>조회수</th>
                          <th>첨부</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>
                            1
                          </td>
                          <td class="left">
                            <a href="">tab05 제목입니다.</a>
                          </td>
                          <td>NTAS</td>
                          <td>2024.12.12</td>
                          <td>3</td>
                          <td><span class="material-symbols-outlined">attach_file</span></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- card end -->
          <!-- card start -->
          <div class="card" id="card3">
            <div class="card_head">
              <div class="subtitle02">내 자동화 업무</div>
              <!-- tab button -->
              <div class="tab_menu line_sm">
                <button class="tab_button active" data-tab="tab06">전체(30)</button>
                <button class="tab_button" data-tab="tab07">개발중(30)</button>
                <button class="tab_button" data-tab="tab08">개발완료(30)</button>
                <button class="tab_button" data-tab="tab09">운영중(30)</button>
              </div>
            </div>
            <div class="card_body">
              <div class="table_box">
                <div class="tab_content active" id="tab06">
                  <div class="table_wrap">
                    <table>
                      <colgroup>
                        <col >
                        <col style="width: 60%;">
                        <col >
                        <col >
                        <col >
                        <col >
                      </colgroup>
                      <thead>
                        <tr>
                          <th>상태</th>
                          <th>제목</th>
                          <th>작성자</th>
                          <th>작성일</th>
                          <th>조회수</th>
                          <th>첨부</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>
                            1
                          </td>
                          <td class="left">
                            <a href="">제목입니다.</a>
                          </td>
                          <td>NTAS</td>
                          <td>2024.12.12</td>
                          <td>3</td>
                          <td><span class="material-symbols-outlined">attach_file</span></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
                <div class="tab_content" id="tab07">
                  <div class="table_wrap">
                    <table>
                      <colgroup>
                        <col >
                        <col style="width: 60%;">
                        <col >
                        <col >
                        <col >
                        <col >
                      </colgroup>
                      <thead>
                        <tr>
                          <th>상태</th>
                          <th>제목</th>
                          <th>작성자</th>
                          <th>작성일</th>
                          <th>조회수</th>
                          <th>첨부</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>
                            1
                          </td>
                          <td class="left">
                            <a href="">제목입니다.</a>
                          </td>
                          <td>NTAS</td>
                          <td>2024.12.12</td>
                          <td>3</td>
                          <td><span class="material-symbols-outlined">attach_file</span></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
                <div class="tab_content" id="tab08">
                  <div class="table_wrap">
                    <table>
                      <colgroup>
                        <col >
                        <col style="width: 60%;">
                        <col >
                        <col >
                        <col >
                        <col >
                      </colgroup>
                      <thead>
                        <tr>
                          <th>상태</th>
                          <th>제목</th>
                          <th>작성자</th>
                          <th>작성일</th>
                          <th>조회수</th>
                          <th>첨부</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>
                            1
                          </td>
                          <td class="left">
                            <a href="">tab08 제목입니다.</a>
                          </td>
                          <td>NTAS</td>
                          <td>2024.12.12</td>
                          <td>3</td>
                          <td><span class="material-symbols-outlined">attach_file</span></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
                <div class="tab_content" id="tab09">
                  <div class="table_wrap">
                    <table>
                      <colgroup>
                        <col >
                        <col style="width: 60%;">
                        <col >
                        <col >
                        <col >
                        <col >
                      </colgroup>
                      <thead>
                        <tr>
                          <th>상태</th>
                          <th>제목</th>
                          <th>작성자</th>
                          <th>작성일</th>
                          <th>조회수</th>
                          <th>첨부</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>
                            1
                          </td>
                          <td class="left">
                            <a href="">tab09 제목입니다.</a>
                          </td>
                          <td>NTAS</td>
                          <td>2024.12.12</td>
                          <td>3</td>
                          <td><span class="material-symbols-outlined">attach_file</span></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- card end -->
        </div>
      </div>
        <div class="footer"></div>
    </div>
  </main>

  <script>
    updateTitle('dashBoard'); 

    document.addEventListener('DOMContentLoaded', function() {

      var calendarEl = document.getElementById('calendar');

      var calendar = new FullCalendar.Calendar(calendarEl, {
        initialView: 'dayGridMonth',
        nowIndicator: true,
        locale: 'ko',

        headerToolbar: {
            left: 'today',
            center: 'title',
            right: 'prev,next'
        },
        navLinks: false, 
        eventLimit: true, 
        views: {
          timeGrid: {
            eventLimit: 2,
          }
        },
        dayMaxEvents: true,
        eventContent: function (arg) {
            let eventType = arg.event.extendedProps.type;
            let caseCount = arg.event.extendedProps.caseCount || 0;
            let htmlContent = '';

            if (eventType === 'success') {
              htmlContent = `
                <div class="event_box success">
                  <img src="/images/calender_success.png" class="event-icon success" />
                  <span>${caseCount}건 성공</span>
                </div>`;
            } else if (eventType === 'failure') {
              htmlContent = `
                <div class="event_box failure">
                  <img src="/images/calender_error.png" class="event-icon failure" />
                  <span>${caseCount}건 실패</span>
                </div>`;
            } else if (eventType === 'reserved') {
              htmlContent = `
                <div class="event_box reserved">
                  <img src="/images/calender_reserved.png" class="event-icon reserved" />
                  <span>${caseCount}건 예약</span>
                </div>`;
            }

            return { html: htmlContent };
        },
        events: [
          {
            id: 'a',
            relatedTitles: ['성공 과제 1'],
            caseCount: 1,
            start: '2024-12-06T11:00:00',
            end: '2024-12-06T19:00:00',
            type: 'success',
            color: '#E4F6EE',
            textColor: '#333',
          },
          {
            id: 'c',
            relatedTitles: ['예약 과제 1', '예약 과제 2'],
            caseCount: 2,
            startTime: '10:00',
            endTime: '18:00',
            daysOfWeek: [1,2],
            type: 'reserved',
            color: '#DBF2FF',
            textColor: '#333',
          },
          {
            id: 'd',
            relatedTitles: ['실패 과제 1', '실패 과제 2', '실패 과제 3'],
            caseCount: 3, // 총 3건
            start: '2024-12-13T11:00:00',
            end: '2024-12-13T19:00:00',
            type: 'failure',
            color: '#FBE8E9',
            textColor: '#333',
          },
        ],
        eventDidMount: function (info) {
          function formatDate(date) {
            if (!date) return 'N/A';
            return date.toLocaleString('ko-KR', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
            });
          }

          let relatedTitles = info.event.extendedProps.relatedTitles || [];
          let relatedTitlesList = relatedTitles
            .map((tit) => `<li>${tit}</li>`)
            .join('');

          let tooltipContent = `
            <div>
              ${relatedTitles.length > 0 ? `<ul>${relatedTitlesList}</ul>` : ''}
            </div>
          `;
          tippy(info.el, {
            content: tooltipContent,
            allowHTML: true,
            placement: "bottom",
            offset: [0, 8],
            interactive: true,
          })
        },
        dayCellContent: function (info) {
            var number = document.createElement("a");
            number.classList.add("fc-daygrid-day-number");
            number.innerHTML = info.dayNumberText.replace("일", '').replace("日","");
            if (info.view.type === "dayGridMonth") {
              return {
                html: number.outerHTML
              };
            }
            return {
              domNodes: []
            };
        },
      });
      calendar.render();
    });

  </script>

</body>
</html>